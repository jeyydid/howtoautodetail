<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Break-Even Calculator ‚Ä¢ Tool Suite</title>
  <meta name="description" content="Detailing business break-even calculator for pricing, profit, and job volume planning." />
  <link rel="stylesheet" href="../../assets/styles.css" />
</head>

<body>
  <header class="site-header">
    <div class="container">
      <div class="site-header__inner">
        <a class="brand" href="../index.html" aria-label="Go to homepage">
          <span class="brand__mark">üß∞</span>
          <span class="brand__text">Tool Suite</span>
        </a>
        <nav class="site-nav">
          <a class="nav-link" href="../../">Home</a>
          <a class="nav-link" href="../break-even/" aria-current="page">Break-Even</a>
        </nav>
      </div>
    </div>
  </header>

  <main class="container">
    <section class="tool-card">
      <div class="tool-card__header">
        <h1>Detailing Business Break-Even Calculator</h1>
        <p class="muted">
          Plan pricing and workload using monthly overheads, per-job costs, and your time. No data leaves your browser.
        </p>
      </div>

      <div class="tool-grid">
        <!-- Inputs -->
        <form class="tool-form" id="be-form" autocomplete="off">
          <h2 class="tool-card__subhead">Inputs</h2>

          <div class="form-grid">
            <div class="input-group">
              <label for="currency">Currency symbol</label>
              <input id="currency" type="text" value="¬£" maxlength="3" />
              <small class="help">Just for display (e.g. ¬£, $, ‚Ç¨).</small>
            </div>

            <div class="input-group">
              <label for="fixed">Monthly fixed costs</label>
              <input id="fixed" type="number" min="0" step="0.01" value="300" />
              <small class="help">Insurance, unit rent, phone, software, finance, etc.</small>
            </div>

            <div class="input-group">
              <label for="variable">Variable cost per job</label>
              <input id="variable" type="number" min="0" step="0.01" value="12" />
              <small class="help">Chemicals, towels wear, disposables, fuel (per job), etc.</small>
            </div>

            <div class="input-group">
              <label for="hoursPerJob">Hours per job (avg)</label>
              <input id="hoursPerJob" type="number" min="0" step="0.1" value="2.5" />
              <small class="help">Your average labour time per job.</small>
            </div>

            <div class="input-group">
              <label for="jobsPerMonth">Jobs per month (planned)</label>
              <input id="jobsPerMonth" type="number" min="0" step="1" value="20" />
              <small class="help">How many jobs you expect to do this month.</small>
            </div>

            <div class="input-group">
              <label for="targetProfit">Target profit per month (optional)</label>
              <input id="targetProfit" type="number" min="0" step="0.01" value="0" />
              <small class="help">Extra profit on top of covering costs.</small>
            </div>

            <div class="input-group">
              <label for="targetHourly">Target hourly pay (optional)</label>
              <input id="targetHourly" type="number" min="0" step="0.01" value="0" />
              <small class="help">If set, calculator adds wages into ‚Äúrequired revenue‚Äù.</small>
            </div>

            <div class="input-group">
              <label for="priceWhatIf">What if I charge per job‚Ä¶</label>
              <input id="priceWhatIf" type="number" min="0" step="0.01" value="60" />
              <small class="help">See profit and effective hourly at this price.</small>
            </div>
          </div>

          <div class="form-actions">
            <button type="button" class="btn" id="calc-btn">Calculate</button>
            <button type="reset" class="btn btn--ghost" id="reset-btn">Reset</button>
          </div>
        </form>

        <!-- Outputs -->
        <aside class="tool-results" aria-live="polite">
          <h2 class="tool-card__subhead">Results</h2>

          <div class="results-stack">
            <div class="result">
              <div class="result__label">Required monthly revenue</div>
              <div class="result__value" id="reqRevenue">‚Äî</div>
              <div class="result__hint muted" id="reqRevenueHint">‚Äî</div>
            </div>

            <div class="result">
              <div class="result__label">Break-even price per job</div>
              <div class="result__value" id="bePrice">‚Äî</div>
              <div class="result__hint muted">Based on your planned jobs/month.</div>
            </div>

            <div class="result">
              <div class="result__label">Break-even jobs per month</div>
              <div class="result__value" id="beJobs">‚Äî</div>
              <div class="result__hint muted">Based on your ‚ÄúWhat if I charge‚Ä¶‚Äù price.</div>
            </div>

            <hr class="divider" />

            <div class="result">
              <div class="result__label">At your chosen price</div>
              <div class="result__value" id="profitAtPrice">‚Äî</div>
              <div class="result__hint muted" id="profitHint">‚Äî</div>
            </div>

            <div class="result">
              <div class="result__label">Effective hourly (after variable costs)</div>
              <div class="result__value" id="effectiveHourly">‚Äî</div>
              <div class="result__hint muted">Excludes fixed costs unless you treat them as ‚Äúwages‚Äù.</div>
            </div>
          </div>

          <details class="tool-notes">
            <summary>What this includes</summary>
            <ul>
              <li><strong>Fixed costs:</strong> paid once per month regardless of jobs done.</li>
              <li><strong>Variable costs:</strong> scale with each job (consumables/fuel/etc.).</li>
              <li><strong>Target hourly pay:</strong> converted into a monthly wage using (jobs/month √ó hours/job).</li>
              <li><strong>Required revenue:</strong> fixed + (variable√ójobs) + target profit + wage (if set).</li>
            </ul>
          </details>
        </aside>
      </div>
    </section>

    <section class="tool-card">
      <h2 class="tool-card__subhead">Tip</h2>
      <p class="muted">
        If you offer multiple services (maintenance wash vs enhancement vs correction), run this with different
        <em>hours per job</em> and <em>variable cost</em> assumptions, then save the numbers as presets later.
      </p>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container">
      <p class="muted">¬© <span id="year"></span> Tool Suite ‚Ä¢ Built for GitHub Pages</p>
    </div>
  </footer>

  <script>
    const $ = (id) => document.getElementById(id);

    function n(v) {
      const x = Number(v);
      return Number.isFinite(x) ? x : 0;
    }

    function fmtMoney(sym, value) {
      // simple formatting without Intl to avoid locale surprises
      const sign = value < 0 ? "-" : "";
      const abs = Math.abs(value);
      return `${sign}${sym}${abs.toFixed(2)}`;
    }

    function fmtNum(value) {
      if (!Number.isFinite(value)) return "‚Äî";
      return value.toFixed(2);
    }

    function calculate() {
      const sym = ($("currency").value || "¬£").trim();

      const fixed = n($("fixed").value);
      const variable = n($("variable").value);
      const hoursPerJob = n($("hoursPerJob").value);
      const jobsPerMonth = n($("jobsPerMonth").value);
      const targetProfit = n($("targetProfit").value);
      const targetHourly = n($("targetHourly").value);
      const priceWhatIf = n($("priceWhatIf").value);

      const totalHoursMonth = jobsPerMonth * hoursPerJob;
      const wageMonth = targetHourly > 0 ? (targetHourly * totalHoursMonth) : 0;

      const requiredRevenue =
        fixed +
        (variable * jobsPerMonth) +
        targetProfit +
        wageMonth;

      // Break-even price per job (given jobsPerMonth)
      const bePrice =
        jobsPerMonth > 0 ? (requiredRevenue / jobsPerMonth) : NaN;

      // Break-even jobs per month (given priceWhatIf)
      // priceWhatIf * jobs >= fixed + variable*jobs + targetProfit + wageMonth
      // (priceWhatIf - variable - (targetHourly*hoursPerJob if set)) * jobs >= fixed + targetProfit
      const wagePerJob = targetHourly > 0 ? (targetHourly * hoursPerJob) : 0;
      const contributionPerJob = priceWhatIf - variable - wagePerJob;

      let beJobs = NaN;
      if (contributionPerJob > 0) {
        beJobs = (fixed + targetProfit) / contributionPerJob;
      }

      // Profit at chosen price (using planned jobs/month)
      const revenueAtPrice = priceWhatIf * jobsPerMonth;
      const costAtPrice = fixed + (variable * jobsPerMonth) + wageMonth;
      const profitAtPrice = revenueAtPrice - costAtPrice;

      // Effective hourly (after variable costs only)
      const marginPerJobBeforeFixed = priceWhatIf - variable;
      const effectiveHourly =
        hoursPerJob > 0 ? (marginPerJobBeforeFixed / hoursPerJob) : NaN;

      // Render
      $("reqRevenue").textContent = fmtMoney(sym, requiredRevenue);
      $("reqRevenueHint").textContent =
        targetHourly > 0
          ? `Includes wages of ${fmtMoney(sym, wageMonth)} (${fmtMoney(sym, targetHourly)}/hr √ó ${fmtNum(totalHoursMonth)} hrs).`
          : "Covers fixed + variable costs + target profit (if set).";

      $("bePrice").textContent = Number.isFinite(bePrice) ? fmtMoney(sym, bePrice) : "‚Äî";

      $("beJobs").textContent =
        Number.isFinite(beJobs)
          ? `${Math.ceil(beJobs)} jobs/month (‚âà ${fmtNum(beJobs)} exact)`
          : "‚Äî";
      // If contribution is <= 0, explain why
      if (!(contributionPerJob > 0)) {
        $("beJobs").textContent = "Not possible (price too low vs costs/wage)";
      }

      $("profitAtPrice").textContent = fmtMoney(sym, profitAtPrice);
      $("profitHint").textContent =
        profitAtPrice >= 0
          ? `After fixed + variable costs${targetHourly > 0 ? " + your wage target" : ""}, at ${jobsPerMonth} jobs/month.`
          : `This is a loss at ${jobsPerMonth} jobs/month. Increase price, reduce costs, or increase volume.`;

      $("effectiveHourly").textContent =
        Number.isFinite(effectiveHourly) ? `${fmtMoney(sym, effectiveHourly)}/hr` : "‚Äî";
    }

    $("calc-btn").addEventListener("click", calculate);
    $("be-form").addEventListener("input", () => {
      // live update, but keep it lightweight
      calculate();
    });

    $("reset-btn").addEventListener("click", () => {
      // allow the form reset to happen, then recalc
      setTimeout(calculate, 0);
    });

    $("year").textContent = new Date().getFullYear();

    // initial calc
    calculate();
  </script>
</body>
</html>
